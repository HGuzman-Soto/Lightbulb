{% extends "layout.html" %}
{% block content %}
<!-- Scripts for adding and removing questions and answers -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="../static/js/QuizForm.js"></script>
<div class="form-container">
    <div class="content-section">
        <form action="{{ url_for('quizzes.new_quiz') }}" method="POST">
            {{ form.hidden_tag() }} <!--adds csrf form-->
            <fieldset class="form-group">
                <div class="form-group">
                    <legend class="border-bottom mb-4">Create Quiz</legend>
                    <!-- quiz title -->
                    {{ form.name.label }}
                    {{ form.name }}
                </div>
                <div class="form-group">
                    <!-- Question -->
                    {{ form.question_content.label }}
                    {{ form.question_content }}
                </div>
                <div class="form-group">
                    <!-- Classroom Name -->
                    <!-- DROPDOWN EXISTS BUT DOESNT WORK -->
                    {{ form.classroomid.label }}
                    <div class="btn dropdown show btn-lg btn-block">
                        <a aria-expanded="false" aria-haspopup="true" class="navbar-brand dropdown-toggle"
                        data-toggle="dropdown" id="dropdownMenuLink" role="button">
                            Pick a Classroom
                        </a>
                        <div class="dropdown-menu">
                            {% for classroom in current_user.classrooms %}
                                <a class="dropdown-item" href="">
                                    {{ classroom.name }}
                                </a>
                            {% endfor %}
                                <a class="dropdown-item" href="">
                                    None
                                </a>
                        </div>
                    </div>
                    {{ form.classroomid }}
                </div>

                <div class="subforms-container">
                    {% for answer in form.question_answers %}
                    <div class="subform" data-index="{{ loop.index0 }}" id="question-{{ loop.index0 }}-form">
                        <div class="form-group">
                            {{ answer.content.label }} {{ loop.index0 + 1 }}
                            {{ answer.content }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </fieldset>
            <div class="form-group">
                {{ form.submit(class="btn btn-lg btn-outline-info") }}
            </div>
        </form>
        <a href="{{ url_for('users.account') }}">
            Cancel
        </a>
         {% if form.errors %}
            {{ form.errors }}
        {% endif %}

        {% if data is defined %}
            <p>Received data: {{ data }}</p>
        {% endif %}
    </div>
</div>
{% endblock  %}