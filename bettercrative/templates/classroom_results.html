{% extends "layout.html" %}

{% block content %}

<!-- Create a basic table template -->

<div class="container" style="margin:auto;">
	<h1 id="results-title">Quiz Results</h1>
	{% for quiz in classroom.added_quizzes %}
		<!-- Graphs for quiz -->
		<table id="classroom-results">
			<thead>
				<tr>
					<th>Name</th>
					{% for question in quiz.questions %}
					<th>{{ question.index + 1 }}</th>
					{% endfor %}
				</tr>
			</thead>
			<tbody>
				<!-- Student Answers -->
				{% for student,response in students.items() %}
				<tr>
					<td> {{student.id}} </td>
					{% for question in quiz.questions %}
					<td>
						{% for student_answer in response %}
							{% if question.id == student_answer.question_id %}
								<span style="background-color: {% if student_answer.correct %}green{% else %}red{% endif %};" class="student-answer">
									{{ student_answer.value }}
								</span>
							{% endif %}
						{% endfor %}
					</td>
					{% endfor %}
				</tr>
				{% endfor %}

				<!-- Answer Key -->
				<tr>
					<td> Correct Answers</td>
					{%for question in quiz.questions %}
						<td id="correct-answer-{{ loop.index0 }}">
							<!-- loop through answers within each question to find the correct one -->
							{% for answer in question.answers %}
								{% if answer.correct%}
									{{ answer.content }}
								{% endif %}
							{% endfor%}
						</td>
					{%endfor%}
				</tr>
			<tbody>

		</table>
		<!-- end of graphs -->
	{% endfor %}
</div>

<button class="btn btn-lg btn-primary quiz-back-btn"><a onclick="goBack();">
	<i class="fas fa-angle-double-left"></i> Go Back</a></button>

<!-- Chart.js area -->


<div style="height:40vh; width:40vw;">
	<!-- Temporary area to display charts of student data -->
	<canvas id="basicChart"></canvas>
	<button class="general-btn btn"
	        onclick="create_chart(numTrue='{{ sumRight }}' , numFalse='{{ sumWrong }}');">
		<i class="fas fa-chart-bar" aria-hidden="true"></i>
		Show student response {{ sumRight }}
	</button>
</div>

<script src="{{ url_for('static', filename='js/data_visualization.js') }}"></script>
<script crossorigin="anonymous"
        integrity="sha256-R4pqcOYV8lt7snxMQO/HSbVCFRPMdrhAFMH+vr9giYI="
        src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>

{% endblock  %}
