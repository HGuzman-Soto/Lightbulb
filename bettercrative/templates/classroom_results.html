{% extends "layout.html" %}

{% block content %}
<script crossorigin="anonymous"
        integrity="sha256-R4pqcOYV8lt7snxMQO/HSbVCFRPMdrhAFMH+vr9giYI=" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>


<h1>Results of quiz </h1>

<form action="/classroom/{{classroomid}}/results" method="GET POST">


    <!--This is mostly like this so its easier for the frontend team to use these values and
    use chart.js to make it look pretty -->

    <!--The backend queries for all right answers and wrong answer
    It returns I think a list of them that are variables rightAnswers and wrongAnswers-->

    <!-- this is the original setup, changing from response oriented to student oriented -->
    <!-- <h3> Correct: </h3>
    {% for response in rightAnswers %}
    <h4> {{ response }} </h4>
    {% endfor %}
    <br> </br>
    <h3> Wrong: </h3>
    {% for response in wrongAnswers %}
    <h4> {{ response }} </h4>

    {% endfor %}
    <br></br>
    <h4>Number of Correct Answers: {{ sumRight }}</h4>
    <h2></h2>
    <h4>Number of Wrong Answers: {{ sumWrong }}</h4> -->

    <!-- Create a basic table template -->
    <div>
        <h2>Responses</h2>
        <table class="table-striped">
            <thead>
                <th>Response ID</th>
                {% for question in quiz.questions %}
                <th>{{ question.name }}</th>
                {% endfor %}
                <th>Total Correc</th>
            </thead>
            <thead>
                <!-- Response ID's -->
                {% for response in quiz.responses %}
                    <tr>
                        <th>response.id</th>
                        <!-- iterate through all question responses for this responseID -->
                        {% for question in quiz.questions %}
                            <th class="{% if response.{{ question }} != quiz.question.correct %} danger {% endif %}">{{ response.{{ question }} }}</th>
                        {% endfor %}
                        <th>
                            {{ numCorrect }} / {{ quiz.questions|length }}
                        </th>
                    </tr>
                {% endfor %}
            </thead>
        </table>
    </div>

    <!--Right now redirects to classroom and kinda funky, change as you please-->
    <input formaction="/classroom/{{classroomid}}" type="submit" value="Go back">
</form>
<!-- Chart.js area -->


<div style="height:40vh; width:40vw;">
    <!-- Temporary area to display charts of student data -->
    <canvas id="basicChart"></canvas>
    <button class="Show-Student-Response btn"
            onclick="create_chart(numTrue='{{ sumRight }}' , numFalse='{{ sumWrong }}');">
        Show student response {{ sumRight }}
    </button>
</div>


<script src="{{ url_for('static', filename='js/data_visualization.js') }}"></script>

{% endblock  %}
