{% extends "layout.html" %}

{% block content %}
<style>
    body{
        background-image: none;
    }

    section.nav-section {
        background-color: #6A9E77;
    }

    .affix {
        padding: 0;
        font-size: 80%;
        background-color: #6A9E77;
    }

    .affix .container .logo a {
        color: black;
        font-size: 100%;
    }
    .affix .container .navlinks a{
    color: black;
    }

    .nav .affix .navTrigger i {
        font-size: 80%;
        color: black;
    }

    .affix .navTrigger i {
        background-color: black;
    }

    .affix .navTrigger p {
        color: black;
    }



</style>

<div id="quiz-content-container">

	<!-- Quiz Edit Container for users -->
	<div id="editing-container">
		<!--  want to change this later to classroom name  -->

		<div id="quizTitle"></div>

		{% if current_user.is_authenticated %}

		<div id="edit-section">
			<div class="headerSection">
				<div class="SaveExitBtn btn"><a href="{{ url_for('main.home') }}">Save and Exit</a></div>
			</div>
		</div>

		{% endif %}

		<!-- Classroom Title -->
		<div class="btn classroom-title editTitle" id='classroom-{{classroom.id}}' onclick='showEditClassroom({{classroom.id}})'>
            <span id="classroomname">
                {{ classroom.name }}
			</span>
			<span style="margin:.5vw; float:right; opacity:0.5; font-size:2vw;">
				<i class="fas fa-pencil-alt"></i>
			</span>
		</div>										
		<form class="edit-classroom-title" action="{{ url_for('classrooms.edit_classroom_name', classroom_id=classroom.id) }}">
			{{form.hidden_tag()}}
			<div class='edit-classroom-form' id='classroom-form-{{classroom.id}}'style='display:none;'>
				<!-- <input placeholder="enter new name here" value='{{classroom.name}}' id='classroomname-content-{{classroom.id}}' type='text'>  -->
				{{form.name(placeholder='Enter new name ' ,id='classroomname-content-'~classroom.id,value=classroom.name)}}
				{{form.submitClass(class='btn btn-sm btn-outline-info', type='submit',id='submit-classroom-'~classroom.id, value='Save')}}
				<span class='btn btn-sm btn-outline-danger' onclick='cancelEditClassroom({{classroom.id}})'> Cancel</span>

			</div>
		</form>
		<!-- prevent things from floating after this section -->
		<div style=" clear: both;"></div>
		<!-- prevent things from floating after this section -->


		<div id="question">

			<div class="question-container theme-med-shadow">

				<!-- contents of multiple choice box -->
				<div class="question-edit-header">
					<div class="question-number">
						<div class="quizlist" id="quizzes-{{classroom.id}}">
							<div id="ActiveRoomsHeader" style="font-size: 2.2vw;">
								<span class="Active-Rooms">Added Quizzes</span>
								<a class="btn Add-A-Quiz"
								   href="{{ url_for('classrooms.add_quiz', classroom_id=classroom.id) }}">Add a Quiz</a>

							</div>
							<div id="classroom-info" class="container-fluid">
							{% for quiz in classroom.added_quizzes|sort(attribute="name") %}
							<!-- JavaScript option to set the current quiz in the list to active -->
							<div class="row classroom-table-rows">
								<div class="col-6" {% if quiz.id == classroom.active_quiz %} style="color: white;" {% endif %}>
									{{ quiz.name }}
								</div>
								<div class="col">
									<a class="btn btn-lg quiz-options"
									        href="{{ url_for('quizzes.quiz', quiz_id=quiz.id)}}">
										Edit Quiz
									</a>
								</div>
								{% if quiz.id != classroom.active_quiz %}
								<div class="col-2">
									<a class="btn btn-lg quiz-options"
									        href="{{ url_for('classrooms.remove_quiz', quiz_id=quiz.id,classroom_id=classroom.id) }}">
										Remove Quiz
									</a>
								</div>
								<div class="col-2">
									<a id='set-active-{{classroom.id}}' class="btn btn-lg quiz-options" href="#"
									        onclick="set_active('{{ url_for('classrooms.set_active') }}', quiz_id='{{quiz.id}}', classroom_id='{{classroom.id}}')">
										 Set Active
									</a>
								</div>

								{% else %}
								<div id="unset-active-btn" class="col-2">
									<a id='remove-active-{{classroom.id}}' class="btn btn-lg quiz-options" href="#"
									        onclick="set_active('{{ url_for('classrooms.remove_active') }}', quiz_id='{{quiz.id}}', classroom_id='{{classroom.id}}')">
										Unset Active
									</a>
								</div>
								{% endif %}
							</div>
							{%endfor%}
							</div>
						</div>
					</div>

				</div>
				{% if (current_user.is_authenticated) and (classroom.owner == current_user) %}
				<div id="classroom-options">
				{% if classroom.active_quiz %}
					<button type="button" class="Take-Active-Quiz btn"
					   onclick="window.location.href='{{ url_for('classrooms.take_quiz', classroom_id=classroom.id) }}';">Take active Quiz</button>
				{% endif %}

				<!--I put this in each specific classroom. Only viewable if your login(teacher) and owner-->
				<!--TODO make this invisible if there aren't any responses yet -->
					<button type="button" class="View-Results btn"
					   onclick="window.location.href='{{ url_for('classrooms.view_results', classroom_id=classroom.id) }}';">View Results</button>
				</div>
				{% endif %}
			</div>
		</div>
	</div>
</div>
{% endblock %}
