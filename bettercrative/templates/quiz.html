{% extends "layout.html" %}
{% block content %}

    <!-- Display the current quiz and its content -->
    <!--I'm not sure if just dispalying the form is the best approach, but it is the one I'm taking rn-->
    <!-- <div class = "container">
        <div class = "col-md-6 quiz-section">
            <div class = "multipleChoice" id = "multipleChoice">
                <div id = "letter" class= "letterChoices">A </div>
            
                <div id = "letter" class= "letterChoices">B </div>
            
                <div id = "letter" class= "letterChoices">C </div>
            
                <div id = "letter" class= "letterChoices">D</div>
            </div>
        <div class = "col-md-6 questionAnswers">
            {% for answers in quiz.question_answers %}
            
            <div class= "answerOptions">
                
                    <h1 class = "answerInput" id ="answerInput">  {{answers}} </h1>
                
            </div>
            
            {% endfor %}
        
        </div>
    </div> -->
    
    <style>
        body{
            background-image: none;
        }
        section.nav-section{
            background-color:rgb(188, 252, 231)
        }
        .transparent-background{
            background-image: none;
        }
        
        .affix {
        padding: 0;
        font-size: 80%;
        background-color:rgb(188, 252, 231);
        }
        .affix .container .logo a{
        color: black;
        font-size: 100%;
        }
        .affix .container .navlinks a{
        color: black;
        }
        .nav .affix .navTrigger i{
        font-size: 80%;
        color: black;
        }
        .affix .navTrigger i{
        background-color: black;
        }
        .affix .navTrigger p{
            color: black;
        }
    


    </style>
    
    <div id = "quiz-content-container">

        <!-- Quiz Edit Container for users -->
        <div id = "editing-container">
            <!--  want to change this later to classroom name  -->
            
            <div id = "quizTitle">   </div>
            
            <div id = "edit-section">
                

                

                
                <div class ="headerSection">
                    
                    <div class = "editSign">Quiz</div>
                    <div class = "QuizSaveExitBtn btn" > <a href ="{{ url_for('users.account')}}" >Save and Exit</a></div>
                </div>
            </div>

            <!-- Quiz Title -->
            <div id = "quiz-title">
                <div id="quizname">
                    {{quiz.name}}

                </div>
            </div>

            <!-- Sets the nav bar for the questions, add scrolling later.  format so it is all in one row -->
            <div>
                {% for question in quiz.questions %}
                    <a class="btn {% if quiz.active_question == question.name %} active {% endif %}" id="qbtn-{{ loop.index }}" onclick="changeActiveQuestion(this)">
                        {% if not loop.first %}
                        <button class="btn  shift-Button" onclick="shiftQuestion('{{ url_for('quizzes.shift_question') }}', q_id={{ question.id }}, direction='left')">
                            <-
                        </button>
                        {% endif %}
                        {{question.name}}
                        <button class="btn  Remove-Button" onclick="removeQuestion('{{ url_for('quizzes.remove_question') }}', q_id={{ question.id }})">
                            X
                        </button>
                        {% if not loop.last %}
                        <button class="btn  shift-Button" onclick="shiftQuestion('{{ url_for('quizzes.shift_question') }}', q_id={{ question.id }}, direction='right')">
                            ->
                        </button>
                        {% endif %}
                    </a>

                {% endfor %}
                

                <button class="btn" onclick="addQuestion('{{ url_for('quizzes.add_question') }}', q_id={{ quiz.id }})">
                    +
                </button>

            </div>
            <!-- style="display:none" in the section for hiding and showing in javascript -->

            <!-- prevent things from floating after this section -->
            <div style =" clear: both;"></div>
            <!-- prevent things from floating after this section -->

            <div id = "questions">
                {% for question in quiz.questions %}
                <span id = "question-{{ loop.index }}" {% if not loop.first %} style="display: none;" {% endif %}>
                    
                    <!-- in the future, need to know whether a question is multiple choice, short answer or t/f -->
                    <!-- if multiple choice, give div class multiple choice same with others -->
                    <!-- also need to be able to add questions in one quiz -->
                   
                    <div id = "question">
                        {% if question.category == 'Multiple Choice' %}
                        <div class = "multiple-choice">

                            <!-- contents of multiple choice box -->
                            <span class = "question-edit-header">
                                <span class="question-number">
                                    <label>{{ loop.index }}) <!--{{quiz.question_content}}--></label>
                                    {% if question.content is none %}
                                    
                                    <!-- Sending in route for modifying the Question -->
                                    <a id = "Quiz-Edit" onclick="addQuestionContent('{{ url_for('quizzes.add_question')}}', question_id = {{question.id}}"> Add Question </a>

                                    
                                    {% else %}
                                    <a id = "Quiz-Edit" href= "#"> Edit</a>
                                    {%endif%}    
                                </span>
                                
                            </span>
                            

                            <span class = "answerchoices">
                                <span class = "menu">
                                    
                                    <!-- prevent things from floating after this section -->
                                    <span style =" clear: both;"></span>
                                    <!-- prevent things from floating after this section -->

                                </span>
                            </span>

                            <span class ="reset"> </span>
                            {% if question.answers %}
                            {%for answer in question.answers %}
                            <span class = "answerContainer reset">
                                <span class = "answerChoice">
                                    <span class = "choice"> {{ "abcdefghijklmnopqrstuvwxyz"[loop.index0] }} </span>
                                    
                                    <span class = "answerBox">
                                        <span class = "answerBox-answer">
                                            {{answer.content}}
                                        </span>
                                    </span>
                                </span>
                            {%endfor%}
                                {% endif %}
                            </span>
                        </div>
                        {% elif question.category == 'True/False' %}
                        <!-- Put true/false answer format here -->
                        {% elif question.category == 'Short Answer' %}
                        <!-- Put short answer format here -->
                        {% elif question.category == 'IDE' %}
                        <!-- Put IDE format here -->
                        {% endif %}
                    </div>
                </span>
                {% endfor %}
            </div>
        </div>
    </div>
<script>
    var previous = 1;
    function changeActiveQuestion(elem) {
        var index = elem.id.slice(-1);
        if(index != previous) {
            document.getElementById("question-" + index).style.display = "block";
            document.getElementById("question-" + previous).style.display = "none";
        }
        previous = index;
    }
</script>
    
    
    




{% endblock %}

